<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>任务5</title>
	<style>
         #queue{
         	display: flex;
         	justify-content:flex-start;
         	align-items:flex-end;    /*底部对齐！*/
            
         }



           #queue div {
     
              flex:0 1 auto;
              width: 10px;
              margin: 10px 5px;
              padding: 0px 10px;
              background-color: red;
              cursor: pointer;
              font-size: 15px;
          }
      </style>

</head>
<body>
	<input type="text" id="input_n">
	<input type="button" value="左侧入" id="l_in">
	<input type="button" value="右侧入" id="r_in" >
	<input type="button" value="左侧出" id="l_out">
	<input type="button" value="右侧出" id="r_out">
     <input type="button" value="冒泡排序" id="bubble">
    <div id="queue">
    	
    </div>

	<script>
      
          function right_in(queue){
                var vue=document.getElementById("input_n").value;
                if(check(vue)){
                var span=document.createElement("div");
                 span.innerHTML=vue;
             span.style.height=vue*10+'px';
                 queue.appendChild(span);
                }

          }
         function left_in(queue){
         	   var vue=document.getElementById("input_n").value;
         	   if(check(vue)){        	   	
	          	    var span=document.createElement("div");
	          	     span.innerHTML=vue;
	          	      span.style.height=vue*10+'px';
	          	     var spanList=queue.childNodes;
	          	     queue.insertBefore(span,spanList[0]);  	   	
         	   }

         }
    
       function left_out(queue){
              var childs=queue.childNodes;
              queue.removeChild(childs[0]);

       }
       function right_out(queue){
       	    var childs=queue.childNodes;
       	    queue.removeChild(childs[childs.length-1]);
       }
 
         function init(){
          var queue=document.getElementById("queue");
          document.getElementById("l_in").onclick=function(){
              left_in(queue);
          };
          document.getElementById("r_in").onclick=function(){
              right_in(queue);
          };
          
           document.getElementById("l_out").onclick=function(){
              left_out(queue);
          };
          document.getElementById("r_out").onclick=function(){
              right_out(queue);
          };
          document.getElementById("bubble").onclick=function(){
              bubble_sort(queue);
          };

           document.getElementById("queue").onclick = function( e ) {
		        e = e || window.event;
		         var t = e.target || e.srcElement;  //t:目标对象
		         var tagName = t.tagName;　//tagName标签名称
		         if( tagName == 'SPAN' ) {
		            queue.removeChild(t);　
		         }
               }
         }
       

         function check(vue){
         	 var queue=document.getElementById("queue");
         	    if(queue.childNodes.length>60){
              	alert("数量超过了,不能再输入！");
              	document.getElementById("input_n").value="";
              	return false;
              }

             if(vue>=0&&vue<=100){
             	
             	return true;
             }
             else {
                alert("数值应在0和100之间");
                document.getElementById("input_n").value="";
             	return false;
                }

         }


       function bubble_sort(queue){
       	     var queue=document.getElementById("queue");
       	     var childs=queue.childNodes;
       	     var child_nums=queue.childNodes.length;
           
            for(var j=0;j<child_nums-1;j++) {         
			        for(var i=0;i<child_nums-i-1;i++) {
			             if(parseInt(childs[i].style.height)>parseInt(childs[i+1].style.height)) {
			                 var node=queue.removeChild(queue.childNodes[i]);
			                 queue.insertBefore(node,queue.childNodes[i+1]);
			            }
                }
         }

         }


         init();
	</script>
</body>
</html>
